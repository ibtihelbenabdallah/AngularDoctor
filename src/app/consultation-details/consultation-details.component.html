<div *ngIf="consultation" class="consultation-card">
  <h1>Consultation Details</h1>
  <div class="consultation-info">
    <div class="info-item">
      <p>ğŸ†”<strong>ID:</strong>  {{ consultation.id }}</p>
    </div>
    <div class="info-item">
      <p>ğŸ‘¤<strong>Patient name:</strong>  {{ consultation.PatientName }}</p>
    </div>
    <div class="info-item">
      <p>ğŸ‘¨â€âš•ï¸<strong>Doctor name:</strong>  {{ consultation.DoctorName }}</p>
    </div>
    <div class="info-item">
      <p>ğŸ“…<strong>Date:</strong>  {{ consultation.Date }}</p>
    </div>
    <div class="info-item">
      <p>â° <strong>Consultation Time:</strong> {{ consultation.ConsultationTime }}</p>
    </div>
    <div class="info-item">
      <p>ğŸ“<strong>Reason:</strong>  {{ consultation.Reason }}</p>
    </div>
    <div class="info-item">
      <p>ğŸ’¬<strong>Notes:</strong>  {{ consultation.Notes }}</p>
    </div>
  </div>


  <!-- Bouton Modifier -->
  <button class="btn-edit" (click)="openEditPopup()">âœï¸Edit</button>
</div>
<div *ngIf="isPopupOpen" class="popup-overlay">
  <div class="popup-content">
    <h2>Edit Consultation</h2>
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="popup-form">
      <!-- Patient Section -->
      <div class="form-section">
        <h3>Patient Details</h3>
        <mat-form-field appearance="outline" floatLabel="always" class="long-field">
          <mat-label>Patient Name</mat-label>
          <select matNativeControl formControlName="PatientName">
            <option *ngFor="let patient of patients" [value]="patient.Name">{{ patient.Name }}</option>
          </select>
        </mat-form-field>
      </div>

      <!-- Doctor Section -->
      <div class="form-section">
        <h3>Doctor Details</h3>
        <mat-form-field appearance="outline" floatLabel="always" class="long-field">
          <mat-label>Doctor Name</mat-label>
          <select matNativeControl formControlName="DoctorName">
            <option *ngFor="let doctor of doctors" [value]="doctor.Name">{{ doctor.Name }}</option>
          </select>
        </mat-form-field>
      </div>

      <!-- Date Section -->
      <div class="form-section">
        <h3>Consultation Date</h3>
        <mat-form-field appearance="outline" floatLabel="always" class="long-field">
          <mat-label>Date</mat-label>
          <input matInput formControlName="Date" type="date" />
        </mat-form-field>
      </div>

      <!-- Time Section -->
      <div class="form-section">
        <h3>Consultation Time</h3>
        <mat-form-field appearance="outline" floatLabel="always" class="long-field">
          <mat-label>Time</mat-label>
          <input matInput formControlName="ConsultationTime" type="time" />
        </mat-form-field>
      </div>

      <!-- Reason Section -->
      <div class="form-section">
        <h3>Reason for Consultation</h3>
        <mat-form-field appearance="outline" floatLabel="always" class="long-field">
          <mat-label>Reason</mat-label>
          <textarea matInput formControlName="Reason"></textarea>
        </mat-form-field>
      </div>

      <!-- Notes Section -->
      <div class="form-section">
        <h3>Additional Notes</h3>
        <mat-form-field appearance="outline" floatLabel="always" class="long-field">
          <mat-label>Notes</mat-label>
          <textarea matInput formControlName="Notes"></textarea>
        </mat-form-field>
      </div>

      <!-- Actions -->
      <div class="form-actions">
        <button type="submit" class="btn-submit">Save</button>
        <button type="button" class="btn-cancel" (click)="closePopup()">Cancel</button>
      </div>
    </form>
  </div>
</div>
